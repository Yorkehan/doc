(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{181:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),a("h4",{attrs:{id:"github-码云gitee"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-码云gitee","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://github.com/baomidou/dynamic-datasource-spring-boot-starter",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github"),a("OutboundLink")],1),t._v(" | "),a("a",{attrs:{href:"https://gitee.com/baomidou/dynamic-datasource-spring-boot-starter",target:"_blank",rel:"noopener noreferrer"}},[t._v("码云Gitee"),a("OutboundLink")],1)]),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("dynamic-datasource-spring-boot-starter 是一个基于springboot的快速集成多数据源的启动器。")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),a("p",[t._v("网上关于动态数据源的切换的文档有很多，核心只有两种。")]),t._v(" "),t._m(10),t._v(" "),a("p",[t._v("如果你的数据源较少，场景不复杂，选择以上任意一种都可以。如果你需要更多特性，请尝试本动态数据源。")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),a("p",[t._v("不能使用多数据源事务（同一个数据源下能使用事务），网上其他方案也都不能提供。")]),t._v(" "),a("p",[t._v("如果你需要使用到分布式事务，那么你的架构应该到了微服务化的时候了。")]),t._v(" "),a("p",[t._v("如果呼声强烈，项目达到800 star，作者考虑集成分布式事务。")]),t._v(" "),a("p",[t._v("PS: 如果您只是几个数据库但是有强烈的需求分布式事务，建议还是使用传统方式自己构建多套环境集成atomic这类，网上百度很多。")]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._m(24),t._m(25),t._v(" "),t._m(26),t._v(" "),a("p",[t._v("注解在service实现或mapper接口方法上，但强烈不建议同时在service和mapper注解。 (可能会有问题)")]),t._v(" "),t._m(27),t._v(" "),t._m(28),a("p",[t._v("在mybatis环境下也可注解在mapper接口层。")]),t._v(" "),t._m(29),a("hr"),t._v(" "),t._m(30),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[a("h4",{attrs:{id:"druid集成，mybatisplus集成，动态增减数据源等等更多更细致的文档在这里-点击查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#druid集成，mybatisplus集成，动态增减数据源等等更多更细致的文档在这里-点击查看","aria-hidden":"true"}},[t._v("#")]),t._v(" Druid集成，MybatisPlus集成，动态增减数据源等等更多更细致的文档在这里     "),a("a",{attrs:{href:"https://gitee.com/baomidou/dynamic-datasource-spring-boot-starter/wikis/pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击查看"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("h4",{attrs:{id:"项目javadoc一览-点击查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目javadoc一览-点击查看","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目Javadoc一览                  "),a("a",{attrs:{href:"https://apidoc.gitee.com/baomidou/dynamic-datasource-spring-boot-starter/",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击查看"),a("OutboundLink")],1)])])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"动态数据源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动态数据源","aria-hidden":"true"}},[this._v("#")]),this._v(" 动态数据源")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://s1.ax1x.com/2018/07/31/PwPVAA.png",border:"0"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{attrs:{align:"center"}},[s("strong",[this._v("一个基于springboot的快速集成多数据源的启动器")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{attrs:{align:"center"}},[s("a",{attrs:{href:"https://www.travis-ci.org/baomidou/dynamic-datasource-spring-boot-starter",target:"_blank"}}),this._v(" "),s("img",{attrs:{src:"https://www.travis-ci.org/baomidou/dynamic-datasource-spring-boot-starter.svg?branch=master"}}),this._v(" "),s("a",{attrs:{href:"http://mvnrepository.com/artifact/com.baomidou/dynamic-datasource-spring-boot-starter",target:"_blank"}},[s("img",{attrs:{src:"https://maven-badges.herokuapp.com/maven-central/com.baomidou/dynamic-datasource-spring-boot-starter/badge.svg"}})]),this._v(" "),s("a",{attrs:{href:"http://www.apache.org/licenses/LICENSE-2.0.html",target:"_blank"}},[s("img",{attrs:{src:"http://img.shields.io/:license-apache-brightgreen.svg"}})]),this._v(" "),s("a",[s("img",{attrs:{src:"https://img.shields.io/badge/JDK-1.7+-green.svg"}})]),this._v(" "),s("a",[s("img",{attrs:{src:"https://img.shields.io/badge/springBoot-1.4+_1.5+_2.0+-green.svg"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介","aria-hidden":"true"}},[this._v("#")]),this._v(" 简介")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("其支持 "),s("strong",[this._v("Jdk 1.7+,    SpringBoot 1.4.x  1.5.x   2.0.x")]),this._v("。最新版为"),s("img",{attrs:{src:"https://maven-badges.herokuapp.com/maven-central/com.baomidou/dynamic-datasource-spring-boot-starter/badge.svg"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("示例项目")]),this._v(" 可参考项目下的samples目录。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("示例项目")]),this._v(" 可参考项目下的samples目录。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("示例项目")]),this._v(" 可参考项目下的samples目录。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优势","aria-hidden":"true"}},[this._v("#")]),this._v(" 优势")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("构建多套环境，优势是方便控制也容易集成一些简单的分布式事务，缺点是非动态同时代码量较多,配置难度大。")]),this._v(" "),s("li",[this._v("基于spring提供原生的 "),s("code",[this._v("AbstractRoutingDataSource")]),this._v(" ，参考一些文档自己实现切换。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("数据源分组，适用于多种场景 纯粹多库  读写分离  一主多从  混合模式。")]),t._v(" "),a("li",[t._v("简单集成Druid数据源监控多数据源，简单集成Mybatis-Plus简化单表，简单集成P6sy格式化sql，简单集成Jndi数据源。")]),t._v(" "),a("li",[t._v("简化Druid和HikariCp配置，提供全局参数配置。")]),t._v(" "),a("li",[t._v("提供自定义数据源来源(默认使用yml或properties配置)。")]),t._v(" "),a("li",[t._v("项目启动后能动态增减数据源。")]),t._v(" "),a("li",[t._v("使用spel动态参数解析数据源，如从session，header和参数中获取数据源。（多租户架构神器）")]),t._v(" "),a("li",[t._v("多层数据源嵌套切换。（一个业务ServiceA调用ServiceB，ServiceB调用ServiceC，每个Service都是不同的数据源）")]),t._v(" "),a("li",[t._v("使用正则匹配或spel表达式来切换数据源（实验性功能）。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"劣势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#劣势","aria-hidden":"true"}},[this._v("#")]),this._v(" 劣势")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"约定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#约定","aria-hidden":"true"}},[this._v("#")]),this._v(" 约定")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("本框架只做 "),a("strong",[t._v("切换数据源")]),t._v(" 这件核心的事情，并"),a("strong",[t._v("不限制你的具体操作")]),t._v("，切换了数据源可以做任何CRUD。")]),t._v(" "),a("li",[t._v("配置文件所有以下划线 "),a("code",[t._v("_")]),t._v(" 分割的数据源 "),a("strong",[t._v("首部")]),t._v(" 即为组的名称，相同组名称的数据源会放在一个组下。")]),t._v(" "),a("li",[t._v("切换数据源即可是组名，也可是具体数据源名称，切换时默认采用负载均衡机制切换。")]),t._v(" "),a("li",[t._v("默认的数据源名称为  "),a("strong",[t._v("master")]),t._v(" ，你可以通过spring.datasource.dynamic.primary修改。")]),t._v(" "),a("li",[t._v("方法上的注解优先于类上注解。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#建议","aria-hidden":"true"}},[this._v("#")]),this._v(" 建议")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("强烈建议在 "),s("strong",[this._v("主从模式")]),this._v(" 下遵循普遍的规则，以便他人能更轻易理解你的代码。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("主数据库  "),a("strong",[t._v("建议")]),t._v("   只执行 "),a("code",[t._v("INSERT")]),t._v(" "),a("code",[t._v("UPDATE")]),t._v(" "),a("code",[t._v("DELETE")]),t._v(" 操作。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("从数据库  "),s("strong",[this._v("建议")]),this._v("   只执行 "),s("code",[this._v("SELECT")]),this._v(" 操作。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"使用方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("引入dynamic-datasource-spring-boot-starter。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.baomidou"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("dynamic-datasource-spring-boot-starter"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${version}"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("配置数据源。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("dynamic")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{attrs:{class:"token key atrule"}},[t._v("primary")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master "),a("span",{attrs:{class:"token comment"}},[t._v("#设置默认的数据源或者数据源组,默认值即为master")]),t._v("\n      "),a("span",{attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("master")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("username")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("password")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("123456")]),t._v("\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("driver-class-name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.jdbc.Driver\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("url")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//xx.xx.xx.xx"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3306/dynamic\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("slave_1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("username")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("password")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("123456")]),t._v("\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("driver-class-name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.jdbc.Driver\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("url")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//xx.xx.xx.xx"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3307/dynamic\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("slave_2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("username")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("password")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("123456")]),t._v("\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("driver-class-name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.jdbc.Driver\n          "),a("span",{attrs:{class:"token key atrule"}},[t._v("url")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//xx.xx.xx.xx"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3308/dynamic\n       "),a("span",{attrs:{class:"token comment"}},[t._v("#......省略")]),t._v("\n       "),a("span",{attrs:{class:"token comment"}},[t._v("#以上会配置一个默认库master，一个组slave下有两个子库slave_1,slave_2")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 多主多从                      纯粹多库（记得设置primary）                   混合配置")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                               "),a("span",{attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                               "),a("span",{attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                           "),a("span",{attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                           "),a("span",{attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("dynamic")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                              "),a("span",{attrs:{class:"token key atrule"}},[t._v("dynamic")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                              "),a("span",{attrs:{class:"token key atrule"}},[t._v("dynamic")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                           "),a("span",{attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                           "),a("span",{attrs:{class:"token key atrule"}},[t._v("datasource")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("master_1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                             "),a("span",{attrs:{class:"token key atrule"}},[t._v("mysql")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                                "),a("span",{attrs:{class:"token key atrule"}},[t._v("master")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("master_2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                             "),a("span",{attrs:{class:"token key atrule"}},[t._v("oracle")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                               "),a("span",{attrs:{class:"token key atrule"}},[t._v("slave_1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("slave_1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                              "),a("span",{attrs:{class:"token key atrule"}},[t._v("sqlserver")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                            "),a("span",{attrs:{class:"token key atrule"}},[t._v("slave_2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("slave_2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                              "),a("span",{attrs:{class:"token key atrule"}},[t._v("postgresql")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                           "),a("span",{attrs:{class:"token key atrule"}},[t._v("oracle_1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("slave_3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                              "),a("span",{attrs:{class:"token key atrule"}},[t._v("h2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("                                   "),a("span",{attrs:{class:"token key atrule"}},[t._v("oracle_2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("使用  "),s("strong",[this._v("@DS")]),this._v("  切换数据源。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("@DS")]),this._v(" 可以注解在方法上和类上，"),s("strong",[this._v("同时存在方法注解优先于类上注解")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("注解")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("结果")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("没有@DS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("默认数据源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v('@DS("dsName")')]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dsName可以为组名也可以为具体某个库的名称")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@DS")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"slave"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("UserServiceImpl")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" JdbcTemplate jdbcTemplate"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" List"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Map"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("selectAll")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("  jdbcTemplate"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("queryForList")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"select * from user"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n  "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@DS")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"slave_1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" List"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Map"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("selectByCondition")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("  jdbcTemplate"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("queryForList")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"select * from user where age >10"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@DS")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"slave"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("UserMapper")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Insert")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"INSERT INTO user (name,age) values (#{name},#{age})"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("addUser")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Param")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"name"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Param")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"age"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Integer age"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Update")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"UPDATE user set name=#{name}, age=#{age} where id =#{id}"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("updateUser")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Param")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"id"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Integer id"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Param")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"name"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Param")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"age"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Integer age"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Delete")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"DELETE from user where id =#{id}"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("deleteUser")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Param")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"id"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Integer id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Select")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"SELECT * FROM user"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@DS")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"slave_1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  List"),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("User"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("selectAll")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"赶紧集成体验一下吧！-如果需要更多功能请继续往下看！"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#赶紧集成体验一下吧！-如果需要更多功能请继续往下看！","aria-hidden":"true"}},[this._v("#")]),this._v(" 赶紧集成体验一下吧！ 如果需要更多功能请继续往下看！")])}],!1,null,null,null);e.options.__file="dynamic-datasource.md";s.default=e.exports}}]);